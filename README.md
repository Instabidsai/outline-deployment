# Outline Wiki Deployment for Instabids AI

This repository contains the deployment configuration for Outline Wiki - our company knowledge base and command center.

## 🚀 What is Outline?

Outline is an open-source wiki and knowledge base similar to Notion, but with:
- Full REST API for integration
- Real-time collaboration
- Markdown support
- Slack integration
- Self-hosted (we control our data)

## 📋 Prerequisites

1. **DigitalOcean Droplet** (minimum 4GB RAM)
2. **Domain**: `hub.instabids.ai` pointed to your droplet
3. **DigitalOcean Spaces** for file storage
4. **Slack App** for OAuth authentication
5. **SendGrid** account for emails

## 🛠️ Setup Instructions

### 1. Create DigitalOcean Droplet

- Size: Basic 4GB RAM / 2 vCPUs
- Region: NYC3 (or your preferred)
- Image: Ubuntu 22.04 LTS

### 2. Configure DNS

Point `hub.instabids.ai` to your droplet's IP address.

### 3. Create Slack App

1. Go to https://api.slack.com/apps
2. Click "Create New App"
3. Choose "From scratch"
4. Name: "Instabids AI Hub"
5. Workspace: Select your Instabids workspace
6. Add OAuth Redirect URL: `https://hub.instabids.ai/auth/slack.callback`
7. Add OAuth scopes:
   - `identity.basic`
   - `identity.email`
   - `identity.avatar`
8. Save Client ID and Client Secret

### 4. Create DigitalOcean Spaces

1. Create a new Space: `instabids-outline`
2. Region: NYC3
3. Create access keys and save them

### 5. Deploy Outline

SSH into your droplet and run:

```bash
# Clone this repository
git clone https://github.com/Instabidsai/outline-deployment.git
cd outline-deployment

# Copy and configure environment
cp .env.example .env
nano .env  # Fill in all required values

# Make deploy script executable
chmod +x deploy.sh

# Run deployment
./deploy.sh
```

## 🔧 Configuration

Edit `.env` file with:

- **Database Password**: Generate a strong password
- **Slack OAuth**: Client ID and Secret from your Slack app
- **DigitalOcean Spaces**: Access keys and bucket name
- **SendGrid**: API key for sending emails

## 📝 Environment Variables

Key variables to configure:

- `SECRET_KEY` & `UTILS_SECRET`: Auto-generated by deploy script
- `POSTGRES_PASSWORD`: Your PostgreSQL password
- `SLACK_CLIENT_ID` & `SLACK_CLIENT_SECRET`: From Slack app
- `AWS_ACCESS_KEY_ID` & `AWS_SECRET_ACCESS_KEY`: DigitalOcean Spaces credentials
- `AWS_S3_UPLOAD_BUCKET_NAME`: Your Spaces bucket name
- `SMTP_PASSWORD`: SendGrid API key

## 🚀 Post-Deployment

After successful deployment:

1. Access Outline at https://hub.instabids.ai
2. Sign in with Slack
3. Create your first collection
4. Get API token from Settings → API Tokens
5. Configure MCP tools (see mcp-server directory)

## 🔄 Maintenance

### View logs
```bash
docker-compose logs -f outline
```

### Restart services
```bash
docker-compose restart
```

### Update Outline
```bash
docker-compose pull outline
docker-compose up -d outline
```

### Backup database
```bash
docker-compose exec postgres pg_dump -U outline outline > backup.sql
```

## 🔌 MCP Integration

The MCP server for Claude integration is in development. It will provide:

- `search_knowledge`: Search all company documents
- `create_document`: Create new documents
- `update_document`: Update existing documents
- `list_collections`: View all collections
- `post_to_slack`: Post updates to Slack

## 🆘 Troubleshooting

### SSL Certificate Issues
```bash
docker-compose run --rm certbot renew
docker-compose restart nginx
```

### Database Connection Issues
```bash
docker-compose logs postgres
docker-compose restart postgres
```

### Outline Not Starting
```bash
docker-compose logs outline
# Check for missing environment variables
```

## 📞 Support

For issues or questions:
- Check Outline logs: `docker-compose logs outline`
- Slack: #all-instabids-systems
- GitHub Issues: Create an issue in this repo

---

**Next Steps**: After deployment, we'll set up the MCP server to connect Outline with Claude Desktop for seamless knowledge management.
